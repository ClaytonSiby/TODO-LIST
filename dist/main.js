(()=>{const e=document.querySelector("[data-lists]"),t=document.querySelector("[data-new-list-form]"),a=document.querySelector("[data-new-list-input]"),n=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container]"),d=document.querySelector("[data-list-title]"),i=document.querySelector("[data-tasks]"),o=document.getElementById("task-template"),r=document.querySelector("[data-new-task-form]"),s=document.querySelector("[data-new-task-title]"),c=document.querySelector("[data-new-task-date]"),u=document.querySelector("[data-new-task-description]"),m=document.querySelector("[data-select-priority]"),p=document.querySelector("[data-clear-complete-tasks-button]"),y="task.lists",f="task.selectedListId";let S=JSON.parse(localStorage.getItem(y))||[],v=localStorage.getItem(f);function k(){g(),q()}function g(){localStorage.setItem(y,JSON.stringify(S)),localStorage.setItem(f,v)}function q(){h(e),S.forEach((t=>{const a=document.createElement("li");a.dataset.listId=t.id,a.classList.add("list-name"),a.innerText=t.name,t.id===v&&a.classList.add("active-list"),e.appendChild(a)}));const t=S.find((e=>e.id===v));null==v?l.style.display="none":(l.style.display="",d.innerText=t.name,h(i),function(e){e.tasks.forEach((e=>{const t=document.importNode(o.content,!0),a=t.querySelector("input");a.id=e.id,a.checked=e.complete;const n=t.querySelector("label");n.htmlFor=e.id,n.append(e.name),n.append(e.date),n.append(e.description),n.append(e.priority),i.appendChild(t)}))}(t))}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(v=e.target.dataset.listId,k())})),i.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(S.find((e=>e.id===v)).tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,g())})),p.addEventListener("click",(e=>{const t=S.find((e=>e.id===v));t.tasks=t.tasks.filter((e=>!e.complete)),k()})),n.addEventListener("click",(e=>{S=S.filter((e=>e.id!==v)),v=null,k()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=a.value;if(null==t||""===t)return;const n=(l=t,{id:Date.now().toString(),name:l,tasks:[]});var l;a.value=null,S.push(n),k()})),r.addEventListener("submit",(e=>{e.preventDefault();const t=s.value,a=c.value,n=u.value,l=m.value;if(!(t||a||n||l))return;const d=(i=t,o=a,r=n,p=l,{id:Date.now().toString(),name:i,date:o,description:r,priority:p,complete:!1});var i,o,r,p;s.value=null,c.value=null,u.value=null,m.value=null,S.find((e=>e.id===v)).tasks.push(d),k()})),q()})();