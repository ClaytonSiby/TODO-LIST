(()=>{"use strict";const e=document.querySelector("[data-new-task-form]"),t=document.querySelector("[data-new-task-title]"),a=document.querySelector("[data-new-task-date]"),n=document.querySelector("[data-new-task-description]"),l=document.querySelector("[data-select-priority]"),i=document.getElementById("task-template");function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const r="task.lists",o="task.selectedListId";let s=document.querySelector("[data-delete-list-button]"),c=document.querySelector("[data-new-list-form]"),u=document.querySelector("[data-new-list-input]");const m=document.querySelector("[data-list-display-container]"),p=document.querySelector("[data-list-title]"),v=document.querySelector("[data-lists]"),y=document.querySelector("[data-tasks]"),f=JSON.parse(localStorage.getItem(r))||[],S=localStorage.getItem(o);function k(){d(v),f.forEach((e=>{const t=document.createElement("li");t.dataset.listId=e.id,t.classList.add("list-name"),t.innerText=e.name,e.id===S&&t.classList.add("active-list"),v.appendChild(t)}));let r=f.find((e=>e.id===S));null==S?m.style.display="none":(m.style.display="",p.innerText=r.name,d(y),function(d){d.tasks.forEach((d=>{if(null!=d.id){const r=document.importNode(i.content,!0),o=r.querySelector("input");o.id=d.id,o.checked=d.complete;const s=r.querySelector("label");s.htmlFor=d.id,s.append(d.name,", "),s.append(d.date,", "),s.append(d.description,", "),s.append(d.priority);const c=document.createElement("p");c.innerHTML="Edit",c.classList.add("edit"),c.addEventListener("click",(()=>function(i,d){t.value=i.name,a.value=i.date,l.value=i.priority,n.value=i.description,i.id=null,e.addEventListener("submit",(()=>{i.name=t.value,i.date=a.value,i.priority=l.value,i.description=n.value,d.innerHTML=`${i.name}, ${i.date}, ${i.description}, ${i.priority}`,g()}))}(d,s))),r.querySelector(".task").append(c),y.appendChild(r)}}))}(r))}function g(){localStorage.setItem(r,JSON.stringify(f)),localStorage.setItem(o,S),k()}v.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(S=e.target.dataset.listId,g())})),c.addEventListener("submit",(e=>{e.preventDefault();let t=u.value;if(null==t||""===t)return;let a={id:Date.now().toString(),name:u.value,tasks:[]};u.value=null,f.push(a),g()})),s.addEventListener("click",(e=>{f=f.filter((e=>e.id!==S)),S=null,g()}));const q=document.querySelector("[data-clear-complete-tasks-button]");y.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(f.find((e=>e.id===S)).tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,g())})),q.addEventListener("click",(e=>{let t=f.find((e=>e.id===S));t.tasks=t.tasks.filter((e=>!e.complete)),g()})),e.addEventListener("submit",(e=>{e.preventDefault();const i=t.value,d=a.value,r=n.value,o=l.value;if(!(i||d||r||o))return;const s={id:Date.now().toString(),name:t.value,date:a.value,priority:l.value,description:n.value,complete:!1};t.value=null,a.value=null,n.value=null,l.value=null,f.find((e=>e.id===S)).tasks.push(s),g()})),k()})();